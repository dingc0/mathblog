!function(){var r,e;function t(r){return r.replace(/<[^>]*>?/gi,a)}"object"==typeof exports&&"function"==typeof require?(r=exports,e=require("./Markdown.Converter").Converter):(r=window.Markdown,e=r.Converter),r.getSanitizingConverter=function(){var r=new e;return r.hooks.chain("postConversion",t),r.hooks.chain("postConversion",s),r};var n=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol(?: start="\d+")?|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,o=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,i=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function a(r){if(r.match(n)||r.match(o)||r.match(i))return r;var e=!1,t=r.replace(/^(<a href="|<img src=")([^"]*)/i,function(r,t,n){return t+n.replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]/g,function(r){return e=!0,"'"==r?"%27":encodeURIComponent(r)})});return e&&(t.match(o)||t.match(i))?t:""}function s(r){if(""==r)return"";var e,t,n=/<\/?\w+[^>]*(\s|$|>)/g,o=r.toLowerCase().match(n),i=(o||[]).length;if(0==i)return r;for(var a,s=[],c=[],u=!1,h=0;h<i;h++)if(e=o[h].replace(/<\/?(\w+).*/,"$1"),!(s[h]||"<p><img><br><li><hr>".search("<"+e+">")>-1)){if(t=o[h],a=-1,!/^<\//.test(t))for(var f=h+1;f<i;f++)if(!s[f]&&o[f]=="</"+e+">"){a=f;break}-1==a?u=c[h]=!0:s[a]=!0}if(!u)return r;h=0;return r=r.replace(n,function(r){var e=c[h]?"":r;return h++,e})}}();